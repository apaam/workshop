### Shell 及其基本操作

Shell是Linux操作系统的组成部分，它是一种解释和执行用户输入命令的应用程序，通过该程序的图形界面可以访问Linux操作系统的内核，可认为是用户与计算机内核间的桥梁。它将命令传递给系统内核，系统内核根据命令完成相应工作，并通过Shell反馈给用户。当启动Linux系统终端时，Shell自动启动。

Linux的Shell种类很多，常见的有Bourne Shell(sh)、Bourne Again Shell(bash)、C Shell、Korn Shell(ksh)等。可使用`echo`命令在终端内查询Shell种类，如果计算机上安装了多种Shell，可使用sh命令切换要运行的Shell种类。

打开Linux终端时，界面上会出现一个提示符，主要有`#、~、$`等。其中`$`表示当前用户为普通用户，是Linux系统的默认登录用户；`#` 提示符表示当前用户为系统管理员用户，即root用户，默认情况下不允许root用户登录，但在终端中进行某些操作时需要root用户身份才能进行，这时需要切换用户。
在提示符后面，用户可以向系统输入各种Shell命令，这些命令经Shell解释后被操作系统执行。用户不仅可以直接使用Shell的内置命令，还可以应用Shell命令编写Shell脚本文件，达到批量执行命令实现复杂操作的目的。

Shell的命令格式为:
```command -options [argument]```

其中，`command` 表示命令名，`-options`表示选项，为了完成不同的功能，同一命令时可有不同的选项，`[argument]`表示参数，有的命令可以没有参数。使用时组成Shell命令的各部分用空格隔开。

<center> 
表 1 Linux基本操作中常用的Shell命令。
</center> 

|名称和语法|功能|选项说明|
|:---:|:---:|:---|
| `ls [选项] [路径]`|列出指定工作目录下包含的文件及子目录|`-a`:显示所有文件及目录 <br> `-l`:显示文件的详细信息 <br> `-r`:以相反次序显示文件 <br> `-t`:安装创建时间次序显示文件 <br> `-A`:显示所有文件及目录，但不列出“.”和“.." <br> `-F`:显示时在文件名后加符号 <br> `-R`:显示目录内的所有文件|
|`pwd [-version][-help]`|显示当前工作目录的绝对路径|`-help`:显示帮助信息 <br> `-version`:显示版本信息|
|`uname [选项]`|查看当前系统信息|`-r`:显示系统内核版本 <br> `-s`:显示内核名称 <br> `-o`:显示系统信息|
|`cd [路径]`|切换工作目录到指定路径下||
|`cat [选项][文件名]`|在终端界面上显示文件内容|`-n`:对显示内容按行编号 <br> `-b`:与`-n`类似，对空自行不编号 <br> `-s`:当有连续两行以上空白行时，替换为一行空白行|
|`clear`|清屏||
|`sudo [选项] []`|切换用户身份，使用时需输入密码|`-b`:在后台运行 <br> `-E`:指定允许的环境变量 <br> `-e`:不允许命令，编辑相应文件 <br> `-H`:设置环境变量HOME <br> `-h`:显示帮助信息 <br> `-k`:结束密码有效期 <br> `-l`:列出当前用户可执行和不可执行的命令 <br> `-p`:改变询问密码的提示符号 <br> `-s -command`:执行该句后面的命令 <br> `-u -username`:指定用户作为新用户身份 <br> `-v`:延长密码有效期5分钟 <br> `-V`:显示版本信息|
|`su [选项][用户名]`|切换用户|`-c -command`:执行指定命令，完毕后恢复原用户身份 <br> `-.-l` 或 `-login`:改变用户身份，同时改变工作目录和PATH环境变量 <br> `-m, -p` 或 `-preserve-environment`:变更身份时不改变环境变量 <br> `-s-shell`:指定要执行的 shell <br> `-h` 或 `-help`:显示帮助信息 <br> `-V`:显示版本信息|
|`man [命令名]`|显示指定命令的详细内容和使用方法||
|`ps [参数]`|显示当前进程状态|`-A`:列出当前所有进程 <br> `-au`:列出进程的详细信息|
|`kill [参数][程序名或编号]`|中止执行中的程序||
|`jobs [进程名]`|列出进程 ID||
|`fg`|前端执行进程||
|`CTRL-C`|中止正在运行的前端进程||
|`top`|显示所有正在运行的进程|
|`which`|显示可执行程序的完整路径||
|`info coreutils`|查询linux命令|

在Linux终端输入Shell命令时经常会用到通配符，表示特殊含义，常用的通配符及其含义见表2。

<center>
表2 Linux基本操作常用Shell通配符
</center>

|符号|含义|举例|
|:---:|:---:|:---:|
|`*`|表示任意一个字符或任意多个字符组成的字符串|`ls -l./a*`:查看当前目录下所有以a开头的文件及文件夹的详细信息|
|`?`|表示单个字符|`ls -l ./a?`:查看当前目录下所有以a开头且名称长度为2个字符的文件及文件夹的详细信息|
|`[]`|指定被显示内容的范围|`ls [a-d]`:查看当前目录下文件名为 a~d 的文件及文件夹|
|`!`|排除指定内容，显示剩余部分|`ls [!a-d]`:查看当前目录下除文件名为 a~d 外的文件及文件夹|
|`:`|同一行输入多个命令时分隔各命令|`ls: ls-1`:查看当前目录下的文件及文件夹，然后查看它们的详细信息|
|`#`|注释符号，以该符号开头的一行不会被执行，常用于Shell 脚本中||
|`~`|home 目录|`cd ~` :跳到home 目录|
|`.`|当前目录||
|`..`|上一级目录|`cd../../` 回到上两级目录|
|`&`|后台执行|`xlogo &`:后台运行 xlogo 程序|

为了提高Shell命令的输入和执行效率，Shell提供了一些高效输入和执行方法，见表3。

<center>
表 3 Shell高效输入和执行方法
</center>

|功能|实现方法|
|:---|:---|
|命令输入时自动补全|输入命令的前几个字母，按Tab键，如果与所输入的字母匹配的只有一个命令或文件名，输入内命令输入时自动补全，如果有多个与之匹配，发出报警声，这时再按一次Tab键，终端界面上将列出与之匹配的所有命令或文件名|
|历史命令自动输入|按上、下方向键选择曾经输入过的命令，也可输入history查看较长时间范围内的历史命令|
|自定义命令别名|利用alias命令将Shell命令定义为另一个别名，如```alias h=man```即将`man`命令定义为`h`。后续使用时直接输入`h`可实现`man`的功能|
|输入输出重定向|使用符号`<`进行输入重定向，`>`和`>>`进行输出重定向，可实现从文件输入命令，或将输出结果储存在指定文件。`>`和`>>`的区别在于覆盖和追加写入。如 `ls -l > test` 可将 `ls -l` 命令的结果输出到当前目录下的 `test` 文件中|
|管道方法执行多个命令|使用“&#124;”符号隔开多个命令，前一个命令的给出作为后一个命令的输入。例如，命令行```ls -lR /usr/bin ``` &#124;```grep "wp" ```可用于寻找名称中含有字符串 we 且位于目录 `usr/bin` 下的文件|